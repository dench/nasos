/*
 Copyright (c) 2008 Yii Software LLC
 @license http://www.yiiframework.com/license/
 @author Qiang Xue <qiang.xue@gmail.com>
 @since 2.0
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(d,h,g){d instanceof String&&(d=String(d));for(var f=d.length,a=0;a<f;a++){var c=d[a];if(h.call(g,c,a,d))return{i:a,v:c}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,h,g){d!=Array.prototype&&d!=Object.prototype&&(d[h]=g.value)};
$jscomp.getGlobal=function(d){return"undefined"!=typeof window&&window===d?d:"undefined"!=typeof global&&null!=global?global:d};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(d,h,g,f){if(h){g=$jscomp.global;d=d.split(".");for(f=0;f<d.length-1;f++){var a=d[f];a in g||(g[a]={});g=g[a]}d=d[d.length-1];f=g[d];h=h(f);h!=f&&null!=h&&$jscomp.defineProperty(g,d,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(d,g){return $jscomp.findInternal(this,d,g).v}},"es6","es3");
yii.validation=function(d){function h(a,c,b){if("undefined"===typeof File)return[];a=d(a.input,a.$form).get(0).files;return a?0===a.length?(b.skipOnEmpty||c.push(b.uploadRequired),[]):b.maxFiles&&b.maxFiles<a.length?(c.push(b.tooMany),[]):a:(c.push(b.message),[])}function g(a,c,b){if(b.extensions&&0<b.extensions.length){var e=a.name.lastIndexOf(".");e=~e?a.name.substr(e+1,a.name.length).toLowerCase():"";~b.extensions.indexOf(e)||c.push(b.wrongExtension.replace(/\{file\}/g,a.name))}if(b.mimeTypes&&
0<b.mimeTypes.length){a:{e=b.mimeTypes;for(var f=a.type,d=0,g=e.length;d<g;d++)if((new RegExp(e[d])).test(f)){e=!0;break a}e=!1}e||c.push(b.wrongMimeType.replace(/\{file\}/g,a.name))}b.maxSize&&b.maxSize<a.size&&c.push(b.tooBig.replace(/\{file\}/g,a.name));b.minSize&&b.minSize>a.size&&c.push(b.tooSmall.replace(/\{file\}/g,a.name))}var f={isEmpty:function(a){return null===a||void 0===a||d.isArray(a)&&0===a.length||""===a},addMessage:function(a,c,b){a.push(c.replace(/\{value\}/g,b))},required:function(a,
c,b){var e=!1;if(void 0===b.requiredValue){var m="string"==typeof a||a instanceof String;if(b.strict&&void 0!==a||!b.strict&&!f.isEmpty(m?d.trim(a):a))e=!0}else if(!b.strict&&a==b.requiredValue||b.strict&&a===b.requiredValue)e=!0;e||f.addMessage(c,b.message,a)},"boolean":function(a,c,b){b.skipOnEmpty&&f.isEmpty(a)||(b.strict||a!=b.trueValue&&a!=b.falseValue)&&(!b.strict||a!==b.trueValue&&a!==b.falseValue)&&f.addMessage(c,b.message,a)},string:function(a,c,b){b.skipOnEmpty&&f.isEmpty(a)||("string"!==
typeof a?f.addMessage(c,b.message,a):void 0!==b.is&&a.length!=b.is?f.addMessage(c,b.notEqual,a):(void 0!==b.min&&a.length<b.min&&f.addMessage(c,b.tooShort,a),void 0!==b.max&&a.length>b.max&&f.addMessage(c,b.tooLong,a)))},file:function(a,c,b){a=h(a,c,b);d.each(a,function(a,f){g(f,c,b)})},image:function(a,c,b,e){a=h(a,c,b);d.each(a,function(a,k){g(k,c,b);"undefined"!==typeof FileReader&&(a=d.Deferred(),f.validateImage(k,c,b,a,new FileReader,new Image),e.push(a))})},validateImage:function(a,c,b,e,f,
d){d.onload=function(){b.minWidth&&d.width<b.minWidth&&c.push(b.underWidth.replace(/\{file\}/g,a.name));b.maxWidth&&d.width>b.maxWidth&&c.push(b.overWidth.replace(/\{file\}/g,a.name));b.minHeight&&d.height<b.minHeight&&c.push(b.underHeight.replace(/\{file\}/g,a.name));b.maxHeight&&d.height>b.maxHeight&&c.push(b.overHeight.replace(/\{file\}/g,a.name));e.resolve()};d.onerror=function(){c.push(b.notImage.replace(/\{file\}/g,a.name));e.resolve()};f.onload=function(){d.src=this.result};f.onerror=function(){e.resolve()};
f.readAsDataURL(a)},number:function(a,c,b){b.skipOnEmpty&&f.isEmpty(a)||("string"!==typeof a||b.pattern.test(a)?(void 0!==b.min&&a<b.min&&f.addMessage(c,b.tooSmall,a),void 0!==b.max&&a>b.max&&f.addMessage(c,b.tooBig,a)):f.addMessage(c,b.message,a))},range:function(a,c,b){if(!b.skipOnEmpty||!f.isEmpty(a))if(!b.allowArray&&d.isArray(a))f.addMessage(c,b.message,a);else{var e=!0;d.each(d.isArray(a)?a:[a],function(a,c){return-1==d.inArray(c,b.range)?e=!1:!0});void 0===b.not&&(b.not=!1);b.not===e&&f.addMessage(c,
b.message,a)}},regularExpression:function(a,c,b){b.skipOnEmpty&&f.isEmpty(a)||(!b.not&&!b.pattern.test(a)||b.not&&b.pattern.test(a))&&f.addMessage(c,b.message,a)},email:function(a,c,b){if(!b.skipOnEmpty||!f.isEmpty(a)){var e=/^((?:"?([^"]*)"?\s)?)(?:\s+)?(?:(<?)((.+)@([^>]+))(>?))$/.exec(a);if(null===e)e=!1;else{var d=e[5],g=e[6];b.enableIDN&&(d=punycode.toASCII(d),g=punycode.toASCII(g),a=e[1]+e[3]+d+"@"+g+e[7]);e=64<d.length?!1:254<(d+"@"+g).length?!1:b.pattern.test(a)||b.allowName&&b.fullPattern.test(a)}e||
f.addMessage(c,b.message,a)}},url:function(a,c,b){if(!b.skipOnEmpty||!f.isEmpty(a)){b.defaultScheme&&!/:\/\//.test(a)&&(a=b.defaultScheme+"://"+a);var e=!0;if(b.enableIDN){var d=/^([^:]+):\/\/([^\/]+)(.*)$/.exec(a);null===d?e=!1:a=d[1]+"://"+punycode.toASCII(d[2])+d[3]}e&&b.pattern.test(a)||f.addMessage(c,b.message,a)}},trim:function(a,c,b){a=a.find(c.input);c=a.val();b.skipOnEmpty&&f.isEmpty(c)||(c=d.trim(c),a.val(c));return c},captcha:function(a,c,b){if(!b.skipOnEmpty||!f.isEmpty(a)){var e=d("body").data(b.hashKey);
e=null==e?b.hash:e[b.caseSensitive?0:1];for(var g=b.caseSensitive?a:a.toLowerCase(),h=g.length-1,l=0;0<=h;--h)l+=g.charCodeAt(h);l!=e&&f.addMessage(c,b.message,a)}},compare:function(a,c,b){if(!b.skipOnEmpty||!f.isEmpty(a)){var e=void 0===b.compareAttribute?b.compareValue:d("#"+b.compareAttribute).val();"number"===b.type&&(a=parseFloat(a),e=parseFloat(e));switch(b.operator){case "==":e=a==e;break;case "===":e=a===e;break;case "!=":e=a!=e;break;case "!==":e=a!==e;break;case ">":e=a>e;break;case ">=":e=
a>=e;break;case "<":e=a<e;break;case "<=":e=a<=e;break;default:e=!1}e||f.addMessage(c,b.message,a)}},ip:function(a,c,b){if(!b.skipOnEmpty||!f.isEmpty(a)){var d=null,g=null,h=(new RegExp(b.ipParsePattern)).exec(a);h&&(d=h[1]||null,a=h[2],g=h[4]||null);!0===b.subnet&&null===g?f.addMessage(c,b.messages.noSubnet,a):!1===b.subnet&&null!==g?f.addMessage(c,b.messages.hasSubnet,a):!1===b.negation&&null!==d?f.addMessage(c,b.messages.message,a):6==(-1===a.indexOf(":")?4:6)?((new RegExp(b.ipv6Pattern)).test(a)||
f.addMessage(c,b.messages.message,a),b.ipv6||f.addMessage(c,b.messages.ipv6NotAllowed,a)):((new RegExp(b.ipv4Pattern)).test(a)||f.addMessage(c,b.messages.message,a),b.ipv4||f.addMessage(c,b.messages.ipv4NotAllowed,a))}}};return f}(jQuery);
