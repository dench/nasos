/*
 Copyright 2012, Chris Wanstrath
 Released under the MIT License
 https://github.com/defunkt/jquery-pjax
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,h,g){b instanceof String&&(b=String(b));for(var l=b.length,e=0;e<l;e++){var r=b[e];if(h.call(g,r,e,b))return{i:e,v:r}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,h,g){b!=Array.prototype&&b!=Object.prototype&&(b[h]=g.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,h,g,l){if(h){g=$jscomp.global;b=b.split(".");for(l=0;l<b.length-1;l++){var e=b[l];e in g||(g[e]={});g=g[e]}b=b[b.length-1];l=g[b];h=h(l);h!=l&&null!=h&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:h})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,g){return $jscomp.findInternal(this,b,g).v}},"es6","es3");
(function(b){function h(a,d,f){var c=this;return this.on("click.pjax",a,function(a){var e=b.extend({history:!0},t(d,f));e.container||(e.container=b(this).attr("data-pjax")||c);g(a,e)})}function g(a,d,f){f=t(d,f);d=a.currentTarget;if(0!=b(d).data("pjax")){if("A"!==d.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(1<a.which||a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||location.protocol!==d.protocol||location.hostname!==d.hostname||-1<d.href.indexOf("#")&&d.href.replace(/#.*/,
"")==location.href.replace(/#.*/,"")||a.isDefaultPrevented())){var c={url:d.href,container:b(d).attr("data-pjax"),target:d};f=b.extend({},c,f);c=b.Event("pjax:click");b(d).trigger(c,[f]);c.isDefaultPrevented()||(e(f),a.preventDefault(),b(d).trigger("pjax:clicked",[f]))}}}function l(a,d,f){f=t(d,f);d=a.currentTarget;var c=b(d);if("FORM"!==d.tagName.toUpperCase())throw"$.pjax.submit requires a form element";c={type:(c.attr("method")||"GET").toUpperCase(),url:c.attr("action"),container:c.attr("data-pjax"),
target:d};if("GET"!==c.type&&void 0!==window.FormData)c.data=new FormData(d),c.processData=!1,c.contentType=!1;else{if(b(d).find(":file").length)return;c.data=b(d).serializeArray()}e(b.extend({},c,f));a.preventDefault()}function e(a){function d(a,d,c){c||(c={});c.relatedTarget=f;a=b.Event(a,c);k.trigger(a,d);return!a.isDefaultPrevented()}a=b.extend(!0,{},b.ajaxSettings,e.defaults,a);b.isFunction(a.url)&&(a.url=a.url());var f=a.target,c=u(a.url).hash,k=a.context=D(a.container);a.data||(a.data={});
b.isArray(a.data)?(a.data=b.grep(a.data,function(a){return"_pjax"!==a.name}),a.data.push({name:"_pjax",value:k.selector})):a.data._pjax=k.selector;var p;a.beforeSend=function(b,f){"GET"!==f.type&&(f.timeout=0);b.setRequestHeader("X-PJAX","true");b.setRequestHeader("X-PJAX-Container",k.selector);if(f.ieRedirectCompatibility){var e=window.navigator.userAgent;(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/"))&&b.setRequestHeader("X-Ie-Redirect-Compatibility","true")}if(!d("pjax:beforeSend",
[b,f]))return!1;0<f.timeout&&(p=setTimeout(function(){d("pjax:timeout",[b,a])&&b.abort("timeout")},f.timeout),f.timeout=0);f=u(f.url);c&&(f.hash=c);a.requestUrl=E(f)};a.complete=function(b,c){p&&clearTimeout(p);d("pjax:complete",[b,c,a]);d("pjax:end",[b,a])};a.error=function(b,c,f){var e=F("",b,a),k=301<=b.status&&303>=b.status;b=k||d("pjax:error",[b,c,f,a]);if(k||"GET"==a.type&&"abort"!==c&&b)a.replaceRedirect?v(e.url):a.pushRedirect&&(window.history.pushState(null,"",e.url),window.location.replace(e.url))};
a.success=function(f,n,p){var g=e.state,h="function"===typeof b.pjax.defaults.version?b.pjax.defaults.version():b.pjax.defaults.version,l=p.getResponseHeader("X-PJAX-Version"),m=F(f,p,a),C=u(m.url);c&&(C.hash=c,m.url=C.href);if(h&&l&&h!==l)v(m.url);else if(m.contents){e.state={id:a.id||(new Date).getTime(),url:m.url,title:m.title,container:k.selector,fragment:a.fragment,timeout:a.timeout,cache:a.cache};a.history&&(a.push||a.replace)&&window.history.replaceState(e.state,m.title,m.url);if(b.contains(a.container,
document.activeElement))try{document.activeElement.blur()}catch(Q){}m.title&&(document.title=m.title);d("pjax:beforeReplace",[m.contents,a],{state:e.state,previousState:g});k.html(m.contents);(g=k.find("input[autofocus], textarea[autofocus]").last()[0])&&document.activeElement!==g&&g.focus();L(m.scripts,k);m=a.scrollTo;c&&(g=decodeURIComponent(c.slice(1)),g=document.getElementById(g)||document.getElementsByName(g)[0])&&(m=b(g).offset().top);"number"==typeof m&&b(window).scrollTop(m);d("pjax:success",
[f,n,p,a])}else v(m.url)};e.state||(e.state={id:(new Date).getTime(),url:window.location.href,title:document.title,container:k.selector,fragment:a.fragment,timeout:a.timeout,cache:a.cache},window.history.replaceState(e.state,document.title));if(!(e.xhr&&4>e.xhr.readyState&&e.options.skipOuterContainers)){G(e.xhr);e.options=a;var n=e.xhr=b.ajax(a);0<n.readyState&&(a.history&&a.push&&!a.replace&&(M(e.state.id,H(k)),window.history.pushState(null,"",a.requestUrl)),d("pjax:start",[n,a]),d("pjax:send",
[n,a]));return e.xhr}}function r(a,d){return e(b.extend({url:window.location.href,push:!1,replace:!0,scrollTo:!1},t(a,d)))}function v(a){e.options.history&&(window.history.replaceState(null,"",e.state.url),window.location.replace(a))}function I(a){w||G(e.xhr);var d=e.state,f=a.state;if(f&&f.container){if(w&&N==f.url)return;if(d){if(d.id===f.id)return;var c=d.id<f.id?"forward":"back"}var k=q[f.id]||[];a=b(k[0]||f.container);k=k[1];if(a.length){var g={id:f.id,url:f.url,container:a,push:!1,fragment:f.fragment,
timeout:f.timeout,cache:f.cache,scrollTo:!1};if(d&&g.cache){var n=c,h=d.id,l=H(a);q[h]=l;"forward"===n?(n=x,l=y):(n=y,l=x);n.push(h);(h=l.pop())&&delete q[h];z(n,e.defaults.maxCacheLength)}c=b.Event("pjax:popstate",{state:f,direction:c});a.trigger(c);k?(a.trigger("pjax:start",[null,g]),e.state=f,f.title&&(document.title=f.title),d=b.Event("pjax:beforeReplace",{state:f,previousState:d}),a.trigger(d,[k,g]),a.html(k),a.trigger("pjax:end",[null,g])):e(g);a[0].offsetHeight}else v(location.href)}w=!1}function O(a){var d=
b.isFunction(a.url)?a.url():a.url,f=a.type?a.type.toUpperCase():"GET",c=b("<form>",{method:"GET"===f?"GET":"POST",action:d,style:"display:none"});"GET"!==f&&"POST"!==f&&c.append(b("<input>",{type:"hidden",name:"_method",value:f.toLowerCase()}));a=a.data;if("string"===typeof a)b.each(a.split("&"),function(a,d){a=d.split("=");c.append(b("<input>",{type:"hidden",name:a[0],value:a[1]}))});else if(b.isArray(a))b.each(a,function(a,d){c.append(b("<input>",{type:"hidden",name:d.name,value:d.value}))});else if("object"===
typeof a)for(var e in a)c.append(b("<input>",{type:"hidden",name:e,value:a[e]}));b(document.body).append(c);c.submit()}function G(a){a&&4>a.readyState&&(a.onreadystatechange=b.noop,a.abort())}function H(a){var b=a.clone();b.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)});return[a.selector,b.contents()]}function E(a){a.search=a.search.replace(/([?&])(_pjax|_)=[^&]*/g,"");return a.href.replace(/\?($|#)/,"$1")}function u(a){var b=document.createElement("a");b.href=a;return b}
function t(a,d){a&&d?d.container=a:d=b.isPlainObject(a)?a:{container:a};d.container&&(d.container=D(d.container));return d}function D(a){a=b(a);if(a.length){if(""!==a.selector&&a.context===document)return a;if(a.attr("id"))return b("#"+a.attr("id"));throw"cant get selector for pjax container!";}throw"no pjax container for "+a.selector;}function A(a,b){return a.filter(b).add(a.find(b))}function F(a,d,f){var c={};var e=/<html/i.test(a);d=d.getResponseHeader("X-PJAX-URL");c.url=d?E(u(d)):f.requestUrl;
e?(d=b(b.parseHTML(a.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],document,!0)),a=b(b.parseHTML(a.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0],document,!0))):d=a=b(b.parseHTML(a,document,!0));if(0===a.length)return c;c.title=A(d,"title").last().text();f.fragment?(e="body"===f.fragment?a:A(a,f.fragment).first(),e.length&&(c.contents="body"===f.fragment?e:e.contents(),c.title||(c.title=e.attr("title")||e.data("title")))):e||(c.contents=a);c.contents&&(c.contents=c.contents.not(function(){return b(this).is("title")}),
c.contents.find("title").remove(),c.scripts=A(c.contents,"script").remove(),c.contents=c.contents.not(c.scripts));c.title&&(c.title=b.trim(c.title));return c}function L(a,d){if(a){var e=b("script[src]"),c=function(a){var c=this.src;e.filter(function(){return this.src===c}).length?a():c?(b.getScript(c).done(a).fail(a),document.head.appendChild(this)):(d.append(this),a())},g=0,h=function(){if(!(g>=a.length)){var b=a[g];g++;c.call(b,h)}};h()}}function M(a,b){e.options.cache&&(q[a]=b,x.push(a),z(y,0),
z(x,e.defaults.maxCacheLength))}function z(a,b){for(;a.length>b;)delete q[a.shift()]}function P(){return b("meta").filter(function(){var a=b(this).attr("http-equiv");return a&&"X-PJAX-VERSION"===a.toUpperCase()}).attr("content")}function J(){b.fn.pjax=h;b.pjax=e;b.pjax.enable=b.noop;b.pjax.disable=K;b.pjax.click=g;b.pjax.submit=l;b.pjax.reload=r;b.pjax.defaults={history:!0,cache:!0,timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:P,pushRedirect:!1,replaceRedirect:!0,
skipOuterContainers:!1,ieRedirectCompatibility:!0};b(window).on("popstate.pjax",I)}function K(){b.fn.pjax=function(){return this};b.pjax=O;b.pjax.enable=J;b.pjax.disable=b.noop;b.pjax.click=b.noop;b.pjax.submit=b.noop;b.pjax.reload=function(){window.location.reload()};b(window).off("popstate.pjax",I)}var w=!0,N=window.location.href,B=window.history.state;B&&B.container&&(e.state=B);"state"in window.history&&(w=!1);var q={},y=[],x=[];0>b.inArray("state",b.event.props)&&b.event.props.push("state");
b.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/);b.support.pjax?J():K()})(jQuery);
